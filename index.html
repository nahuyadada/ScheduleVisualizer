<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Visualizer</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>

<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <span class="sidebar-logo">ğŸ“…</span>
        </div>
        <div class="sidebar-nav">
            <a href="index.html" class="nav-item active" title="Home">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-text">Home</span>
            </a>
            <a href="compare.html" class="nav-item" title="Compare Schedules">
                <span class="nav-icon">ğŸ“Š</span>
                <span class="nav-text">Compare</span>
            </a>
            <a href="builder.html" class="nav-item" title="Build New Schedule">
                <span class="nav-icon">ğŸ”§</span>
                <span class="nav-text">Build</span>
            </a>
        </div>
        <div class="sidebar-footer">
            <button class="nav-item restart-nav" onclick="restartApp()" title="Restart">
                <span class="nav-icon">ğŸ”„</span>
                <span class="nav-text">Restart</span>
            </button>
        </div>
    </nav>

    <div class="container with-sidebar">
        <header>
            <h1>ğŸ“… Schedule Visualizer</h1>
            <p>Enter your class schedule manually or paste from your school portal</p>
        </header>

        <div class="paste-section">
            <h3>ğŸ“‹ Paste Schedule Text</h3>
            <div class="tutorial-gif">
                <img src="assets/EXAMPLE.gif" alt="How to copy your schedule">
            </div>
            <p class="paste-hint">Copy the schedule table from your portal and paste it here</p>
            <textarea id="pasteArea" placeholder="Paste your schedule data here...
Example:
CSIT440  Industry Trends  T W  08:00 AM - 10:00 AM  ONLINE LEC
IT332  Capstone  T  05:00 PM - 07:00 PM  FIELD LEC"></textarea>
            <div class="paste-actions">
                <button class="parse-btn" onclick="parseTextInput(false)">â• Add to Schedule</button>
                <button class="parse-new-btn" onclick="parseTextInput(true)">ğŸ”„ New Schedule</button>
            </div>
        </div>

        <div class="manual-entry-section">
            <h3>âœï¸ Or Enter Manually</h3>
            <div class="manual-form">
                <input type="text" id="courseCode" placeholder="Course Code (e.g., CSIT440)">
                <input type="text" id="courseSection" placeholder="Section (e.g., G1)">
                <input type="text" id="courseTitle" placeholder="Course Title">
                <select id="courseDay" multiple>
                    <option value="M">Monday</option>
                    <option value="T">Tuesday</option>
                    <option value="W">Wednesday</option>
                    <option value="TH">Thursday</option>
                    <option value="F">Friday</option>
                    <option value="S">Saturday</option>
                    <option value="SU">Sunday</option>
                </select>
                <input type="time" id="startTime" placeholder="Start Time">
                <input type="time" id="endTime" placeholder="End Time">
                <input type="text" id="room" placeholder="Room">
                <button class="add-btn" onclick="addManualCourse()">Add Course</button>
            </div>
        </div>

        <div class="extracted-data-section" id="extractedDataSection" style="display: none;">
            <h2>ğŸ“‹ Extracted Courses</h2>
            <div class="courses-table-container">
                <table class="courses-table" id="coursesTable">
                    <thead>
                        <tr>
                            <th>Course Code</th>
                            <th>Section</th>
                            <th>Course Title</th>
                            <th>Day(s)</th>
                            <th>Time</th>
                            <th>Room</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="coursesTableBody">
                    </tbody>
                </table>
            </div>
            <div class="schedule-save-row">
                <input type="text" id="scheduleName" placeholder="Schedule name (e.g., 2nd Sem 2025)">
                <button class="save-schedule-btn" onclick="saveScheduleWithName()">ğŸ’¾ Save Schedule</button>
            </div>
            <button class="visualize-btn" onclick="visualizeSchedule()">ğŸ“Š Visualize Schedule</button>
        </div>

        <div class="saved-schedules-section" id="savedSchedulesSection" style="display: none;">
            <div class="saved-schedules-header">
                <h2>ğŸ“‚ Saved Schedules</h2>
                <div class="import-export-actions">
                    <button class="export-btn" onclick="exportSchedules()">ğŸ“¤ Export All</button>
                    <button class="import-btn" onclick="document.getElementById('importFile').click()">ğŸ“¥
                        Import</button>
                    <input type="file" id="importFile" accept=".json" style="display: none;"
                        onchange="importSchedules(event)">
                </div>
            </div>
            <div class="saved-schedules-list" id="savedSchedulesList">
                <!-- Saved schedules will be listed here -->
            </div>
        </div>

        <div class="schedule-section" id="scheduleSection" style="display: none;">
            <div class="schedule-header-row">
                <h2>ğŸ“Š Weekly Schedule</h2>
                <div class="schedule-header-actions">
                    <button class="mobile-wallpaper-btn" onclick="showMobileWallpaper()">ğŸ“± Mobile Wallpaper</button>
                    <button class="clear-btn" onclick="clearAllCourses()">ğŸ—‘ï¸ Clear All</button>
                </div>
            </div>
            <div class="current-schedule-name" id="currentScheduleName"></div>
            <div class="schedule-container">
                <div class="schedule-grid" id="scheduleGrid">
                    <!-- Grid will be generated by JavaScript -->
                </div>
            </div>
            <div class="legend" id="legend">
                <!-- Legend will be generated by JavaScript -->
            </div>
        </div>

        <footer>
            <p>ğŸ“… Schedule Visualizer - Christian Andrey Reyes</p>
        </footer>
    </div>

    <!-- Mobile Wallpaper Modal -->
    <div class="mobile-wallpaper-overlay" id="mobileWallpaperModal" style="display: none;">
        <div class="mobile-wallpaper-layout">
            <!-- Left Sidebar - Color Controls -->
            <div class="wallpaper-sidebar">
                <div class="sidebar-section">
                    <h4>ğŸ¨ Customize Colors</h4>
                </div>

                <div class="sidebar-section">
                    <span class="sidebar-label">Background</span>
                    <div class="color-grid">
                        <button class="color-option active" data-color="#000000" title="Black"
                            style="background: #000000;"></button>
                        <button class="color-option" data-color="#1a1a2e" title="Dark Blue"
                            style="background: #1a1a2e;"></button>
                        <button class="color-option" data-color="#ffffff" title="White"
                            style="background: #ffffff; border: 2px solid #333;"></button>
                        <button class="color-option" data-color="#ffc0cb" title="Pink"
                            style="background: #ffc0cb;"></button>
                        <button class="color-option" data-color="#ffb6c1" title="Light Pink"
                            style="background: #ffb6c1;"></button>
                        <button class="color-option" data-color="#e6e6fa" title="Lavender"
                            style="background: #e6e6fa;"></button>
                        <button class="color-option" data-color="#add8e6" title="Light Blue"
                            style="background: #add8e6;"></button>
                        <button class="color-option" data-color="#87ceeb" title="Sky Blue"
                            style="background: #87ceeb;"></button>
                        <button class="color-option" data-color="#98d8c8" title="Mint"
                            style="background: #98d8c8;"></button>
                        <button class="color-option" data-color="#dda0dd" title="Plum"
                            style="background: #dda0dd;"></button>
                        <input type="color" id="customWallpaperColor" class="custom-color-input" title="Custom"
                            value="#000000">
                    </div>
                </div>

                <div class="sidebar-section">
                    <span class="sidebar-label">Boxes</span>
                    <div class="color-grid">
                        <button class="box-color-option active" data-color="#2a2a2a" title="Dark Gray"
                            style="background: #2a2a2a;"></button>
                        <button class="box-color-option" data-color="#3d5a80" title="Steel Blue"
                            style="background: #3d5a80;"></button>
                        <button class="box-color-option" data-color="#5c4d7d" title="Purple"
                            style="background: #5c4d7d;"></button>
                        <button class="box-color-option" data-color="#7b2d5b" title="Burgundy"
                            style="background: #7b2d5b;"></button>
                        <button class="box-color-option" data-color="#1d3557" title="Navy"
                            style="background: #1d3557;"></button>
                        <button class="box-color-option" data-color="#2d6a4f" title="Forest"
                            style="background: #2d6a4f;"></button>
                        <button class="box-color-option" data-color="#ffffff" title="White"
                            style="background: #ffffff; border: 2px solid #333;"></button>
                        <button class="box-color-option" data-color="#ffc0cb" title="Pink"
                            style="background: #ffc0cb;"></button>
                        <button class="box-color-option" data-color="#add8e6" title="Light Blue"
                            style="background: #add8e6;"></button>
                        <button class="box-color-option" data-color="#98d8c8" title="Mint"
                            style="background: #98d8c8;"></button>
                        <input type="color" id="customBoxColor" class="custom-color-input" title="Custom"
                            value="#2a2a2a">
                    </div>
                </div>

                <div class="sidebar-section">
                    <span class="sidebar-label">Text</span>
                    <div class="color-grid">
                        <button class="text-color-option active" data-color="#ffffff" title="White"
                            style="background: #ffffff; border: 2px solid #333;"></button>
                        <button class="text-color-option" data-color="#000000" title="Black"
                            style="background: #000000;"></button>
                        <button class="text-color-option" data-color="#333333" title="Dark Gray"
                            style="background: #333333;"></button>
                        <button class="text-color-option" data-color="#ff6b6b" title="Coral"
                            style="background: #ff6b6b;"></button>
                        <button class="text-color-option" data-color="#ffd93d" title="Yellow"
                            style="background: #ffd93d;"></button>
                        <button class="text-color-option" data-color="#6bcb77" title="Green"
                            style="background: #6bcb77;"></button>
                        <button class="text-color-option" data-color="#4d96ff" title="Blue"
                            style="background: #4d96ff;"></button>
                        <button class="text-color-option" data-color="#ff6eb4" title="Hot Pink"
                            style="background: #ff6eb4;"></button>
                        <input type="color" id="customTextColor" class="custom-color-input" title="Custom"
                            value="#ffffff">
                    </div>
                </div>

                <div class="sidebar-section sidebar-actions">
                    <button class="save-wallpaper-btn" onclick="saveMobileWallpaper()">ğŸ’¾ Save as PNG</button>
                    <button class="close-wallpaper-btn" onclick="closeMobileWallpaper()">âœ• Close</button>
                </div>
            </div>

            <!-- Right Side - Wallpaper Preview -->
            <div class="wallpaper-preview-area">
                <div class="mobile-wallpaper-content" id="mobileWallpaperContent">
                    <!-- Mobile wallpaper will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div class="modal-overlay" id="confirmModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-icon" id="modalIcon">âš ï¸</span>
                <h3 id="modalTitle">Confirm</h3>
            </div>
            <p id="modalMessage">Are you sure?</p>
            <div class="modal-actions">
                <button class="modal-btn cancel-btn" id="modalCancelBtn">Cancel</button>
                <button class="modal-btn confirm-btn" id="modalConfirmBtn">Confirm</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>

</html>